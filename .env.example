# =============================================================================
# SIMULATION CONFIGURATION
# =============================================================================

# Speed multiplier: 1 (real-time), 10 (10x faster), or 100 (100x faster)
SIM_SPEED_MULTIPLIER=1

# Logging level: DEBUG, INFO, WARNING, ERROR
SIM_LOG_LEVEL=INFO

# Checkpoint interval in simulated seconds (minimum 60)
SIM_CHECKPOINT_INTERVAL=300


# =============================================================================
# KAFKA (CONFLUENT CLOUD)
# =============================================================================

# Comma-separated list of Confluent Cloud bootstrap servers
# Example: pkc-xxxxx.us-east-1.aws.confluent.cloud:9092
KAFKA_BOOTSTRAP_SERVERS=

# Security protocol (use SASL_SSL for Confluent Cloud)
KAFKA_SECURITY_PROTOCOL=SASL_SSL

# SASL mechanism (use PLAIN for Confluent Cloud)
KAFKA_SASL_MECHANISMS=PLAIN

# Confluent Cloud API Key (cluster-level)
KAFKA_SASL_USERNAME=

# Confluent Cloud API Secret (cluster-level)
KAFKA_SASL_PASSWORD=

# Schema Registry endpoint
# Example: https://psrc-xxxxx.us-east-2.aws.confluent.cloud
KAFKA_SCHEMA_REGISTRY_URL=

# Schema Registry credentials in format "key:secret"
# Use Schema Registry API Key and Secret (not cluster API key)
KAFKA_SCHEMA_REGISTRY_BASIC_AUTH_USER_INFO=


# =============================================================================
# REDIS (ELASTICACHE)
# =============================================================================

# Redis hostname
# Local: localhost
# ElastiCache: your-cluster.xxxxx.use1.cache.amazonaws.com
REDIS_HOST=localhost

# Redis port (default: 6379)
REDIS_PORT=6379

# Redis password (optional for local dev, required for ElastiCache)
REDIS_PASSWORD=

# Enable SSL/TLS (true for ElastiCache, false for local)
REDIS_SSL=false


# =============================================================================
# OSRM (ROUTING SERVICE)
# =============================================================================

# OSRM service base URL (no trailing slash)
# Local: http://localhost:5000
# AWS ECS: http://osrm-service.internal:5000
OSRM_BASE_URL=http://localhost:5000


# =============================================================================
# DATABRICKS
# =============================================================================

# Databricks workspace URL
# Example: https://dbc-xxxxxxxx-xxxx.cloud.databricks.com
DATABRICKS_HOST=

# Personal access token (generate from User Settings > Developer > Access Tokens)
DATABRICKS_TOKEN=

# Unity Catalog name (default: rideshare)
DATABRICKS_CATALOG=rideshare


# =============================================================================
# AWS
# =============================================================================

# AWS region for all services
AWS_REGION=us-east-1

# AWS credentials (optional if using IAM roles or instance profiles)
# Leave empty when running on ECS with task roles
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=


# =============================================================================
# CONTROL PANEL API
# =============================================================================

# API key for Control Panel authentication
# Used in X-API-Key header
# Generate a secure random key (e.g., using: openssl rand -hex 32)
API_KEY=

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000


# =============================================================================
# CONTROL PANEL FRONTEND
# =============================================================================

# Backend API URL (used by frontend to make API calls)
VITE_API_URL=http://localhost:8000

# WebSocket URL for real-time updates
VITE_WS_URL=ws://localhost:8000/ws


# =============================================================================
# STREAM PROCESSOR
# =============================================================================

# Window size for GPS aggregation (in milliseconds)
# Smaller = more responsive, larger = more reduction
# Default: 100 (10 updates/sec max per entity)
PROCESSOR_WINDOW_SIZE_MS=100

# Aggregation strategy: "latest" or "sample"
# - latest: Keep only the most recent GPS ping per entity per window
# - sample: Keep every Nth message (controlled by PROCESSOR_SAMPLE_RATE)
PROCESSOR_AGGREGATION_STRATEGY=latest

# For "sample" strategy: emit every Nth message
PROCESSOR_SAMPLE_RATE=10

# Logging level for stream processor
PROCESSOR_LOG_LEVEL=INFO


# =============================================================================
# DOCKER COMPOSE (LOCAL DEVELOPMENT)
# =============================================================================
# These settings are automatically used when running with docker compose.
# Override any setting above by creating a .env.local file (gitignored).

# For local Docker development, these services connect via container names:
# - kafka:29092 (internal Kafka port)
# - redis:6379
# - osrm:5000
# - stream-processor (consumes from Kafka, publishes to Redis)
#
# When running outside Docker, use localhost with exposed ports:
# - localhost:9092 (Kafka)
# - localhost:6379 (Redis)
# - localhost:5000 (OSRM)

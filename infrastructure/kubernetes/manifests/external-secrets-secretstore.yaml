apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: localstack-secrets
  namespace: default
  labels:
    app: rideshare-platform
    component: external-secrets
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-1
      auth:
        secretRef:
          accessKeyIDSecretRef:
            name: aws-credentials
            key: access-key-id
            namespace: external-secrets
          secretAccessKeySecretRef:
            name: aws-credentials
            key: secret-access-key
            namespace: external-secrets
# AWS Migration: The LocalStack endpoint (http://localstack:4566) is configured
# via the AWS_ENDPOINT_URL env var on the ESO controller (set in the Helm install).
# To switch to real AWS Secrets Manager:
#   1. Remove the --set env[0] flags from the Helm install command
#   2. Replace the aws-credentials Secret with IAM role-based auth (EKS pod identity)
#   3. This SecretStore and all ExternalSecret CRDs remain identical

# ServiceAccounts with IRSA (IAM Roles for Service Accounts) annotations.
# EKS injects AWS credentials into pods via projected volume when
# the ServiceAccount has the eks.amazonaws.com/role-arn annotation.
# Replace <account-id> with actual AWS account ID during deploy:
#   aws sts get-caller-identity --query Account --output text
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: simulation
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::<account-id>:role/rideshare-simulation
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: bronze-ingestion
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::<account-id>:role/rideshare-bronze-ingestion
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: airflow-scheduler
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::<account-id>:role/rideshare-airflow
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: trino
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::<account-id>:role/rideshare-trino
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: hive-metastore
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::<account-id>:role/rideshare-hive-metastore
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: external-secrets
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::<account-id>:role/rideshare-eso

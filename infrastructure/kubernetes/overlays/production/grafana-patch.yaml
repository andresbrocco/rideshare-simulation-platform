# Production patch: Configure Grafana for subdomain routing
# - Sets GF_SERVER_ROOT_URL for grafana.ridesharing.portfolio.andresbrocco.com
# - Disables anonymous access (require login in production)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: grafana
spec:
  template:
    spec:
      containers:
        - name: grafana
          env:
            # Configure root URL for subdomain routing
            - name: GF_SERVER_ROOT_URL
              value: "https://grafana.ridesharing.portfolio.andresbrocco.com/"

            # Disable anonymous access in production
            - name: GF_AUTH_ANONYMOUS_ENABLED
              value: "false"
